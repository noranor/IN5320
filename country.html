<! doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <title>Mandatory Assignment 1.2</title>
        <style>
                h1{
                    font-family: Arial;
                    font-size: 2em;
                }
    
                h2{
                    font-family: Arial;
                    font-size: 1em;
                }
    
        </style>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript">

                let countryList = document.getElementById("countryList");
                let inputArray = [];

                function addUserInput(){
                    var input = document.getElementById("userInput").value, 
                        ul = document.getElementById("countryList"), 
                        li = document.createElement("li"), 
                        inputTxt = document.createTextNode(input);
                    
                    inputArray.push(input);
                    console.log(inputArray);
                    
                    const button = document.createElement("button");
                    button.innerHTML=" X";

                    button.addEventListener("click", function(e){
                        button.parentNode.parentNode.removeChild(button.parentNode);
                        inputArray.splice(inputArray.indexOf(button.parentNode));
                        console.log(inputArray);
                    });
                    
                    li.appendChild(inputTxt);
                    li.appendChild(button);
                    ul.appendChild(li);
                    offlineStorage(inputArray, myFunction);

                    document.getElementById("userInput").value = "";
                }

                function offlineStorage(inputArray, myFunction){
                    for( var i = 0; i < inputArray.length; i++){
                        console.log("Looper gjennom " + inputArray[i] + " i array.");
                        myFunction(inputArray[i]);
                    }
                }
                 
                // Combine this function with the function created in step 2 to 
                // populate the list based on what is stored in the browser.

                function myFunction(e){
                    if (typeof(Storage) !== "undefined") {
                         // Code for localStorage/sessionStorage. 
                         localStorage.setItem(e);  
                         // Se w3schools
                    } else {
                        alert("No web storage support.")
                    }
                }

        </script>
    </head>
    <body>
        <header>
            <section>
                <h1>Countries</h1>
                <h2>Write some country names and watch the magic happen.</h2>
            </section>
        </header>

        <input type="country" name="userInput" id="userInput" placeholder="Country">
        <button onclick="addUserInput()">Add</button>

        <ul id="countryList">
        </ul>
    </body>
    </html>